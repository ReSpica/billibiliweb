{"remainingRequest":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\src\\views\\useredit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\src\\views\\useredit.vue","mtime":1595140803893},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovL2FwaQ0KaW1wb3J0IHsgdXNlcmluZm8sIHVwbG9hZDEsIHVzZXJ1cGRhdGUgfSBmcm9tICJAL25ldHdvcmsvdXNlci5qcyI7DQovL+e7hOS7tg0KaW1wb3J0IE5hdkJhciBmcm9tICJAL2NvbXBvbmVudHMvY29tbW9tL05hdkJhci52dWUiOw0KaW1wb3J0IEVkaXRCdG4gZnJvbSAiQC9jb21wb25lbnRzL2NvbW1vbS9FZGl0QnRuLnZ1ZSI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbW9kZWw6IHt9LA0KICAgICAgdmFuc2hvdzogZmFsc2UNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgYXN5bmMgdXNlcmluZm9EYXRhKCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgdXNlcmluZm8oe30pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5tb2RlbCA9IHJlc1swXTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgLy/lm77niYfkuIrkvKANCiAgICBhc3luYyBhZnRlclJlYWQoZmlsZSkgew0KICAgICAgLy8g5q2k5pe25Y+v5Lul6Ieq6KGM5bCG5paH5Lu25LiK5Lyg6Iez5pyN5Yqh5ZmoDQogICAgICBjb25zdCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgZm9ybWRhdGEuYXBwZW5kKCJmaWxlIiwgZmlsZS5maWxlKTsNCiAgICAgIGF3YWl0IHVwbG9hZDEoZm9ybWRhdGEpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgdGhpcy5tb2RlbC51c2VyX2ltZyA9IHJlcy51cmw7DQogICAgICB9KTsNCg0KICAgICAgdGhpcy5lZGl0KCk7DQogICAgfSwNCiAgICBhc3luYyBlZGl0KCkgew0KICAgICAgYXdhaXQgdXNlcnVwZGF0ZSh0aGlzLm1vZGVsKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGVkaXRCdG5DbGljaygpIHsNCiAgICAgIHRoaXMudmFuc2hvdyA9IHRydWU7DQogICAgfSwNCiAgICBkaWFsb2dDbGljaygpIHsNCiAgICAgIHRoaXMuZWRpdCgpOw0KICAgIH0sDQogICAgZWRpdGJhY2tDbGljaygpew0KICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgTmF2QmFyLA0KICAgIEVkaXRCdG4NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnVzZXJpbmZvRGF0YSgpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["useredit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"useredit.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div v-if=\"model\">\r\n    <navBar :model=\"model\"></navBar>\r\n\r\n    <div class=\"uploadfile\">\r\n      <van-uploader\r\n        class=\"uploading\"\r\n        :after-read=\"afterRead\"\r\n        preview-size=\"100vw\"\r\n      />\r\n      <EditBtn\r\n        style=\"margin-top:10px\"\r\n        left=\"头像\"\r\n      >\r\n        <img\r\n          v-if=\"model.user_img\"\r\n          :src=\"model.user_img\"\r\n          slot=\"right\"\r\n          alt=\"logo\"\r\n        />\r\n        <img\r\n          v-else\r\n          src=\"@/assets/imgs/userlogo.jpg\"\r\n          slot=\"right\"\r\n          alt=\"logo\"\r\n        />\r\n      </EditBtn>\r\n    </div>\r\n\r\n    <EditBtn\r\n      left=\"昵称\"\r\n      @editBtnClick=\"editBtnClick\"\r\n    ><a\r\n        href=\"javascript:;\"\r\n        slot=\"right\"\r\n      >{{model.name}}</a></EditBtn>\r\n\r\n    <EditBtn\r\n      left=\"账号\"\r\n      @editBtnClick=\"editBtnClick\"\r\n    ><a\r\n        href=\"javascript:;\"\r\n        slot=\"right\"\r\n      >{{model.username}}</a></EditBtn>\r\n\r\n    <EditBtn\r\n      left=\"个性签名\"\r\n      @editBtnClick=\"editBtnClick\"\r\n    ><a\r\n        href=\"javascript:;\"\r\n        slot=\"right\"\r\n      >{{model.user_desc}}</a></EditBtn>\r\n\r\n    <div @click=\"editbackClick\" class=\"editback d-flex ai-center jc-center bgc-p color-w\">返回个人信息页</div>\r\n\r\n    <!-- 弹出框 -->\r\n    <van-dialog\r\n      v-model=\"vanshow\"\r\n      title=\"修改\"\r\n      show-cancel-button\r\n      @confirm=\"dialogClick\"\r\n    >\r\n      <van-field\r\n        v-model=\"model.name\"\r\n        label=\"昵称\"\r\n      />\r\n      <van-field\r\n        v-model=\"model.username\"\r\n        label=\"账号\"\r\n      />\r\n      <van-field\r\n        v-model=\"model.user_desc\"\r\n        label=\"个人签名\"\r\n      />\r\n    </van-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//api\r\nimport { userinfo, upload1, userupdate } from \"@/network/user.js\";\r\n//组件\r\nimport NavBar from \"@/components/commom/NavBar.vue\";\r\nimport EditBtn from \"@/components/commom/EditBtn.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      model: {},\r\n      vanshow: false\r\n    };\r\n  },\r\n  methods: {\r\n    async userinfoData() {\r\n      const res = await userinfo({}).then(res => {\r\n        this.model = res[0];\r\n      });\r\n    },\r\n    //图片上传\r\n    async afterRead(file) {\r\n      // 此时可以自行将文件上传至服务器\r\n      const formdata = new FormData();\r\n      formdata.append(\"file\", file.file);\r\n      await upload1(formdata).then(res => {\r\n        console.log(res);\r\n        this.model.user_img = res.url;\r\n      });\r\n\r\n      this.edit();\r\n    },\r\n    async edit() {\r\n      await userupdate(this.model).then(res => {\r\n        console.log(res);\r\n      });\r\n    },\r\n    editBtnClick() {\r\n      this.vanshow = true;\r\n    },\r\n    dialogClick() {\r\n      this.edit();\r\n    },\r\n    editbackClick(){\r\n        this.$router.go(-1)\r\n    }\r\n  },\r\n  components: {\r\n    NavBar,\r\n    EditBtn\r\n  },\r\n  created() {\r\n    this.userinfoData();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\nimg {\r\n  border-radius: 50%;\r\n  height: 10.667vw;\r\n  width: auto;\r\n}\r\n.uploadfile {\r\n  position: relative;\r\n  overflow: hidden;\r\n  .uploading {\r\n    position: absolute;\r\n    opacity: 0;\r\n  }\r\n}\r\n.editback {\r\n  font-size: 5vw;\r\n  padding: 4vw 0;\r\n  margin-top: 2.667vw;\r\n}\r\n</style>"]}]}