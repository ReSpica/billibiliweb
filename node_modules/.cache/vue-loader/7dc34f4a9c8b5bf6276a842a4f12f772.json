{"remainingRequest":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\src\\views\\useredit.vue?vue&type=style&index=0&id=5c6fd469&scoped=true&lang=less&","dependencies":[{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\src\\views\\useredit.vue","mtime":1595140803893},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Live\\maintry\\work\\spica-projects\\bilibiliweb\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1nIHsNCiAgYm9yZGVyLXJhZGl1czogNTAlOw0KICBoZWlnaHQ6IDEwLjY2N3Z3Ow0KICB3aWR0aDogYXV0bzsNCn0NCi51cGxvYWRmaWxlIHsNCiAgcG9zaXRpb246IHJlbGF0aXZlOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICAudXBsb2FkaW5nIHsNCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgb3BhY2l0eTogMDsNCiAgfQ0KfQ0KLmVkaXRiYWNrIHsNCiAgZm9udC1zaXplOiA1dnc7DQogIHBhZGRpbmc6IDR2dyAwOw0KICBtYXJnaW4tdG9wOiAyLjY2N3Z3Ow0KfQ0K"},{"version":3,"sources":["useredit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"useredit.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div v-if=\"model\">\r\n    <navBar :model=\"model\"></navBar>\r\n\r\n    <div class=\"uploadfile\">\r\n      <van-uploader\r\n        class=\"uploading\"\r\n        :after-read=\"afterRead\"\r\n        preview-size=\"100vw\"\r\n      />\r\n      <EditBtn\r\n        style=\"margin-top:10px\"\r\n        left=\"头像\"\r\n      >\r\n        <img\r\n          v-if=\"model.user_img\"\r\n          :src=\"model.user_img\"\r\n          slot=\"right\"\r\n          alt=\"logo\"\r\n        />\r\n        <img\r\n          v-else\r\n          src=\"@/assets/imgs/userlogo.jpg\"\r\n          slot=\"right\"\r\n          alt=\"logo\"\r\n        />\r\n      </EditBtn>\r\n    </div>\r\n\r\n    <EditBtn\r\n      left=\"昵称\"\r\n      @editBtnClick=\"editBtnClick\"\r\n    ><a\r\n        href=\"javascript:;\"\r\n        slot=\"right\"\r\n      >{{model.name}}</a></EditBtn>\r\n\r\n    <EditBtn\r\n      left=\"账号\"\r\n      @editBtnClick=\"editBtnClick\"\r\n    ><a\r\n        href=\"javascript:;\"\r\n        slot=\"right\"\r\n      >{{model.username}}</a></EditBtn>\r\n\r\n    <EditBtn\r\n      left=\"个性签名\"\r\n      @editBtnClick=\"editBtnClick\"\r\n    ><a\r\n        href=\"javascript:;\"\r\n        slot=\"right\"\r\n      >{{model.user_desc}}</a></EditBtn>\r\n\r\n    <div @click=\"editbackClick\" class=\"editback d-flex ai-center jc-center bgc-p color-w\">返回个人信息页</div>\r\n\r\n    <!-- 弹出框 -->\r\n    <van-dialog\r\n      v-model=\"vanshow\"\r\n      title=\"修改\"\r\n      show-cancel-button\r\n      @confirm=\"dialogClick\"\r\n    >\r\n      <van-field\r\n        v-model=\"model.name\"\r\n        label=\"昵称\"\r\n      />\r\n      <van-field\r\n        v-model=\"model.username\"\r\n        label=\"账号\"\r\n      />\r\n      <van-field\r\n        v-model=\"model.user_desc\"\r\n        label=\"个人签名\"\r\n      />\r\n    </van-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//api\r\nimport { userinfo, upload1, userupdate } from \"@/network/user.js\";\r\n//组件\r\nimport NavBar from \"@/components/commom/NavBar.vue\";\r\nimport EditBtn from \"@/components/commom/EditBtn.vue\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      model: {},\r\n      vanshow: false\r\n    };\r\n  },\r\n  methods: {\r\n    async userinfoData() {\r\n      const res = await userinfo({}).then(res => {\r\n        this.model = res[0];\r\n      });\r\n    },\r\n    //图片上传\r\n    async afterRead(file) {\r\n      // 此时可以自行将文件上传至服务器\r\n      const formdata = new FormData();\r\n      formdata.append(\"file\", file.file);\r\n      await upload1(formdata).then(res => {\r\n        console.log(res);\r\n        this.model.user_img = res.url;\r\n      });\r\n\r\n      this.edit();\r\n    },\r\n    async edit() {\r\n      await userupdate(this.model).then(res => {\r\n        console.log(res);\r\n      });\r\n    },\r\n    editBtnClick() {\r\n      this.vanshow = true;\r\n    },\r\n    dialogClick() {\r\n      this.edit();\r\n    },\r\n    editbackClick(){\r\n        this.$router.go(-1)\r\n    }\r\n  },\r\n  components: {\r\n    NavBar,\r\n    EditBtn\r\n  },\r\n  created() {\r\n    this.userinfoData();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\nimg {\r\n  border-radius: 50%;\r\n  height: 10.667vw;\r\n  width: auto;\r\n}\r\n.uploadfile {\r\n  position: relative;\r\n  overflow: hidden;\r\n  .uploading {\r\n    position: absolute;\r\n    opacity: 0;\r\n  }\r\n}\r\n.editback {\r\n  font-size: 5vw;\r\n  padding: 4vw 0;\r\n  margin-top: 2.667vw;\r\n}\r\n</style>"]}]}